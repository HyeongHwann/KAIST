{"title":"채권분석 과제2","markdown":{"headingText":"채권분석 과제2","headingAttr":{"id":"","classes":["unnumbered"],"keyvalue":[]},"containsRefs":false,"markdown":"\n## 1. Callable bond\n\n***(Question)***\n\n만기 2년, 액면이자율 10% (연 1회 지급), 액면가 100 인 수의상환채권 callable bond 를 생각하자. 이 채권의 상환액 call price 는 100, 상환기간은 1년부터 (이자지급 이후) 만기까지 이다. 즉, 채권발행자 (기채자, 채무자) 는 상환기간 동안 원하는 때 100으로 채권을 상환할 수 있다. 1년이 지난 시점에서 만기수익률을 10.05% 라 가정하자.\n\n채권의 가격 $P_0$ 를 구하시오.\n\n시중금리변화에 따라 이 만기수익률이 즉각적으로 10bp 상승할 때의 가격 $P_+$ 를 구하시오.\n\n그리고 만기수익률이 즉각적으로 10bp 하락할 때의 가격 $P_−$ 를 구하시오. \n\n채권발행자는 채권의 가치가 100을 넘어서면 상환할 인센티브가 있음을 고려하라. 이들 세 값을 바탕으로 우리는 수의상환채권에 대하여 유효한 듀레이션을 $-\\frac{1}{P_0}\\times\\frac{P_+-P_-}{20bp}$로 구할 수 있다. 소수점 네째자리까지 리포트하시오.\n\n***(Answer)***\n\n1년이 지난 시점에서 수의상환채권의 잔여현금흐름은 만기 일시납 110이며, YTM은 10.05%이므로 가격 $P_0$는 약 99.9546입니다.\n\n```{r}\nP0=110/(1+0.1005)\nP0\n```\n\n만기수익률이 10bp씩 즉각적으로 움직일 때, 수의상환부를 고려하지 않은 채권가격은 아래와 같습니다.\n\n```{r}\nP0_up=110/(1+0.1005+0.001)\nP0_down=110/(1+0.1005-0.001)\nc(P0_up,P0_down)\n```\n\n그러나, 수의상환채권의 가격은 call price를 초과할 수 없으므로 **$P_+=99.8638,\\;P_-=100$**입니다.\n\n위 가격으로부터 산출한 잔존만기 1년의 수의상환채권의 **듀레이션은 약 0.6812**입니다.\n\n$$D_{callable}-\\frac{1}{P_0}\\times\\frac{P_+-P_-}{20bp}=0.6812$$\n\n```{r}\nduration=(-1/P0)*(P0_up-100)/0.002\nround(duration,4)\n```\n\n## 2. Spot rate\n\n***(Question)***\n\nhw2.xlsx 에는 Treasury par yield (% 값) 가 일부 주어져 있다. 이것은 2024년 3월 21일 기준 US Treasury Par Yield Curve 이다.\n\n선형보간법을 이용하여 빈 곳을 채우고, 1년에 2회 이자를 지급하는 기준으로 하여 spot rate 을 구하시오. 단, 0.5년 과 1년 채권은 무이표 채권이다. 제출할 때에는 % 로 소수점 둘째 자리까지 보이시오.\n\n***(Answer)***\n\n먼저, 선형보간법을 통해 기간별 Par-yield를 구하도록 하겠습니다.\n\n```{r}\n#| output: FALSE\nlibrary(tidyverse)\npar_yield <- tibble(\"year\"=seq(0.5,10,0.5),\n                    \"period\"=c(1:20),\n                    \"paryield\"=c(5.36,5.01,NA,4.62,NA,\n                                 4.42,NA,NA,NA,4.26,\n                                NA,NA,NA,4.28,NA,\n                                NA,NA,NA,NA,4.27))\n```\n\n```{r}\npar_yield <- par_yield %>% \n  mutate(interpolation=if_else(paryield %>% is.na(),\n                               (lag(paryield)+lead(paryield))/2,\n                               paryield)) %>% \n  mutate(interpolation=if_else(interpolation %>% is.na(),\n                               (lag(lag(interpolation))+lead(lead(interpolation)))/2,\n                               interpolation)) %>% \n  mutate(interpolation=if_else(interpolation %>% is.na(),\n                               (lag(interpolation)+lead(interpolation))/2,\n                               interpolation))\npar_yield <- par_yield %>% \n  mutate(interpolation=if_else(interpolation %>% is.na(),\n                               ((20-period)*par_yield$interpolation[14]\n                               +(period-14)*par_yield$interpolation[20])/6,\n                               interpolation))\n\npar_yield %>% as.data.frame()\n```\n\n다음으로, Par-yield와 6개월/1년 spot rate를 통해 기간별 spot rate를 boot-strapping 방식으로 산출하도록 하겠습니다.\n\nPar-yield는 채권의 현재가격을 액면가격으로 만들어주는 coupon-rate입니다. 즉, 액면가 100의 채권이 연간 par-yield만큼 쿠폰을 semi-annually 지급한다면 다음과 같이 쓸 수 있습니다.\n\n$$100=\\sum_{k=1}^{n-1}\\frac{Par/2}{(1+Spot_k/2)^k}+\\frac{100+Par/2}{(1+Spot_n/2)^n}$$\n\n$$\\Rightarrow \\frac{1}{(1+Spot_n/2)^n}=\\frac{1}{100+Par/2}(100-\\sum_{k=1}^{n-1}\\frac{Par/2}{(1+Spot_k/2)^k})$$\n\n$$\\Rightarrow Spot_n=((\\frac{100+Par/2}{100-Sum\\;of\\;Coupon\\;PV})^{\\frac{1}{n}}-1)\\times 2$$\n\n위 수식을 R을 이용해서 산출하고, 소수점 둘째자리까지 반올림한 결과는 아래와 같습니다.\n\n```{r}\nspot <- par_yield %>% \n  select(year,period,interpolation) %>% \n  mutate(coupon=interpolation/2,\n         spot=if_else(period<=2,interpolation,NA)) %>% \n  mutate(dc=1/(1+spot/100/2)^period) %>% \n  mutate(cum_dc=cumsum(dc)) %>%\n  mutate(sum_pvc=coupon*(cum_dc-dc))\n\nfor (i in 3:20){\nspot$sum_pvc[i] <- spot$coupon[i]*spot$cum_dc[i-1]\nspot$dc[i] <- (100-spot$sum_pvc[i])/(100+spot$coupon[i])\nspot$spot[i] <- {{(1/spot$dc[i])^(1/spot$period[i])-1}*200}\nspot$cum_dc[i] <- spot$cum_dc[i-1]+spot$dc[i]\n}\nspot <- spot %>% mutate(spot2=spot %>% round(2))\nspot %>% select(year,period,interpolation,spot2)\n```\n\n## 3. Forward rate\n\n***(Question)***\n\n위의 문제에서 구한 현물이자율을 이용하여 선도이자율을 구하여라. 이 때 선도이자율은 6개월 구간마다 주어진다. 물론 0 부터 6개월까지의 선도이자율은 6개월 현물이자율과 같다. 선도이자율도 % 로 소수점 둘째 자리까지 구하시오.\n\n***(Answer)***\n\nsemi-annually 현물이자율에서 6개월 선도이자율에 대한 수식은 다음과 같습니다.\n\n$$(1+Spot_{n-1})^{n-1}(1+Forward_{n-1,n})=(1+Spot_n)^n$$\n\n$$\\Rightarrow Forward_{n-1,n}=\\frac{(1+Spot_n)^n}{(1+Spot_{n-1})^{n-1}}-1$$\n\n위 수식과 (2)의 **소수점 둘째자리까지 반올림한 Spot rate를 이용**하여 산출한 선도이자율은 아래와 같습니다.\n\n```{r}\nforward <- spot %>% \n  select(year,period,spot,spot2) %>%  \n  mutate(spot_yield=(1+spot/100/2)^period,\n         spot_yield2=(1+spot2/100/2)^period) %>% \n  mutate(forward={{spot_yield/lag(spot_yield)-1}*200} %>% round(2),\n         forward2={{spot_yield2/lag(spot_yield2)-1}*200} %>% round(2))\nforward %>% select(year,period,spot,forward2)\n```\n\n::: {.callout-caution title=\"Spot rate 소수점 자리 문제\"}\nForward rate를 산출할 때, Spot rate를 소수점 두번째 자리까지 반올림하지 않는다면, Spot rate의 오차는 미미하더라도 Forward rate 산출에 영향을 주게 되며, 오차는 기간이 길어질수록 커집니다.\n\n```{r}\nforward %>% select(year,period,forward2, forward) %>% filter(year>=8)\n```\n:::\n\n## 4. Continuous compounding - Forward rate\n\n***(Question)***\n\n챕터2 에서 우리는 선도이자율이 구간별로 주어질 수 있음을 배웠다.\n\nSemi-annual 베이스로 현물이자율을 정의했을 때, $r_1$ 은 1년 현물이자율, $r_{1.5}$ 는 1년 6개월 현물이자율을 나타낸다. 그리고 6개월부터 1년까지 기간에 대한 선도이자율은 $(1+r_1/2)^2 = (1+r_{0.5}/2)(1+f_{[0.5,1]}/2)$ 를 만족한다.\n\n현물이자율을 연속복리법으로 정의했을 떄, 1년 현물이자율을 $r_1$ 이라 놓으면 시작점에서 1 의 투자는 $e^r_1$ 으로 성장한다. 마찬가지로 시간 $t$ 에 대한 현물이자율을 $r_t$ 라 놓으면 시작점에서의 1의 투자는 $e^{tr_t}$ 로 성장한다. 두 시점 a < b 에 대하여 연속복리법에 의한 현물이자율 $r_a, r_b$ 가 주어져 있다. 투자자는 $(a, b)$ 구간에 적용되는 선도거래를 체결하려고 한다.\n\n이 때 중요한 것은 선도이자율인데, 무차익원리에 의한 선도이자율 $f(a, b)$ 를 $a, b, r_a, r_b$ 를 이용하여 나타내시오. 물론 연속복리법을 적용한다.\n\n***(Answer)***\n\n연속복리법 하에서, $f(a, b), a, b, r_a, r_b$ 간에는 아래와 같은 식이 성립해야 합니다.\n\n$$e^{a\\times r_a}\\times e^{(b-a)\\times f(a,b)}=e^{b\\times r_b}$$\n\n이를 통해 $f(a,b)$를 표현하면,\n\n$$\\Rightarrow e^{ar_a+(b-a)f(a,b)}=e^{br_b}$$\n\n$$ar_a+(b-a)f(a,b)=br_b\\;\\Rightarrow\\;f(a,b)=\\frac{br_b-ar_a}{b-a}$$\n\n## 5. Pricing convention - full price\n\n***(Question)***\n\n2024년 3월 15일 호가가 액면 100 당 103-22+ 로 주어진 미 국채가 있다. 이 채권의 만기는 2029년 10월 15일이고 표면금리는 6.125% 이다. 이자는 매 4월 15일, 10월 15일 지급될 때, full price를 구하시오. 소수점 여섯째자리까지 반올림하여 나타내시오.\n\n***(Answer)***\n\n미국 국채의 가격표시방법에 따라, 103-22+의 가격표시는 아래와 같습니다.\n\n$$103-22+=103+\\frac{22}{32}+\\frac{1}{64}=103.703125$$\n\n```{r}\noptions(digits=10)\nclean_price <- 103+22/32+1/64\nclean_price\n```\n\n해당 가격은 호가가격이므로, clean price=103.703125입니다.\n\n경과이자(accrued interest)를 가산해야 Full price를 산출할 수 있습니다.\n\n경과이자는 $\\frac{표면이율 \\times 액면가}{2}\\times \\frac{경과일}{이자지급기간}$을 통해 구할 수 있습니다.\n\n경과일은 152일, 이자지급기간은 183일이고, 산출된 경과이자는 약 2.543716입니다.\n\n따라서, full price = clean(quoted) price + accrued interest = **106.246841**입니다.\n\n```{r}\nlibrary(lubridate)\n\naccrued_date <- ymd(20240315)-ymd(20231015)\ninterest_period <- ymd(20240415)-ymd(20231015)\naccrued_interest={(100*0.06125)/2}*(as.integer(accrued_date)/as.integer(interest_period))\nfull_price=round(clean_price+accrued_interest,6)\n\npaste(accrued_date,interest_period,accrued_interest,full_price,sep=\" / \")\n```\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"채권분석_hw2.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.553","bibliography":["references.bib"],"theme":"cosmo","linestretch":2},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}